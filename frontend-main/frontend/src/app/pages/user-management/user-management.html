<h2>Users</h2>

<div class="filters">
  <div class="filter-item">
    <label>Search</label>
    <input type="text" [(ngModel)]="search" (input)="onFilterChange()" placeholder="Search name/email..." />
  </div>

  <div class="filter-item">
    <label>Role</label>
    <select [(ngModel)]="role" (change)="onFilterChange()">
      <option value="">All Roles</option>
      <option value="ADMIN">Admin</option>
      <option value="AGENT">Agent</option>
      <option value="CUSTOMER">Customer</option>
    </select>
  </div>

  <div class="filter-item">
    <label>Start Date</label>
    <input type="date" [(ngModel)]="startDate" (change)="onFilterChange()" />
  </div>

  <div class="filter-item">
    <label>End Date</label>
    <input type="date" [(ngModel)]="endDate" (change)="onFilterChange()" />
  </div>

  <button (click)="clearFilters()">Clear Filters</button>
</div>

<div *ngIf="loading">Loading...</div>
<div *ngIf="error" class="error">{{ error }}</div>

<table *ngIf="!loading && !error && users.length > 0" class="user-table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Role</th>
      <th>Created</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <td>{{ user.name }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.phone }}</td>
      <td>{{ user.role }}</td>
      <td>{{ user.createdAt | date }}</td>
    </tr>
  </tbody>
</table>

<div *ngIf="!loading && !error && users.length === 0">No users found.</div>
